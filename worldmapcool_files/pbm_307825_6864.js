!function(){var e={isMg:!1,statPath:"/adunit/mut",unit:{id:16592,bids:[{id:6515,bidder:"automatadC",mkp:!0,adj:.85,rs:.85,params:{placementId:19449151},overrideId:2177144},{id:7633,bidder:"admixer",mkp:!0,adj:1,rs:.85,params:{zone:"8edb315d353d4b288411c004a1176be1"},overrideId:2207400},{id:9553,bidder:"criteo",mkp:!0,adj:.9,rs:.75,params:{zoneId:"1422722"},overrideId:2112444},{id:12200,bidder:"adtelligentMarket",mkp:!0,adj:1,rs:.85,params:{pid:16592,aid:530880,overrideId:2112233},overrideId:2112233},{id:13331,bidder:"33across",mkp:!0,adj:1,rs:.85,params:{productId:"siab",siteId:"ccyR6kTkqr6P0XaKlId8sQ"},overrideId:2213184},{id:14408,bidder:"onetag",mkp:!0,adj:.9,rs:.9,params:{pubId:"59a18369e249bfb"},overrideId:2112253},{id:14416,bidder:"improvedigital",mkp:!0,adj:.8,rs:.85,params:{placementId:22296314},overrideId:2112413},{id:14647,bidder:"rtbhouse",mkp:!0,adj:1,rs:.85,params:{publisherId:"f7tRggCNvKnqLxaIp8gJ",region:"prebid-eu",bidfloor:"0.05"},overrideId:2112258},{id:14770,bidder:"eplanning",mkp:!0,adj:.7,rs:.85,params:{ci:"2e43c"},overrideId:2183965}]},pubRev:1,useStaticDomain:"1",domain:"delivercdn.com",enhanceBid:1,bidCeil:null,siteId:6864,pubId:307825,cur:{EUR:.893324,GBP:.795967,ILS:3.47013,RUB:68.861,TRY:6.76432,UAH:26.7408,USD:1,_cur:"USD"},timeout:1500,geoEdgeIds:[]};let t=1===e.isSpecial,n=e.AB;if(n&&1===n.enabled&&n.percent<100){if(100*Math.random()>n.percent)return}let r="vpb";t&&(r="_vps_");let i=window[r]||{};if(i.apiReady)return;i.apiReady=!0,t||(window[r]||(window[r]={}),i=window[r]);var o,d=[function(){const e="https://ssc.33across.com/api/v1/hb",t="https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",n={},r="nm";function i(e){return!function(){try{return window.self!==window.top}catch(e){return!0}}()&&null!==e}function o(e,t,{w:n,h:r}={}){return"visible"===t.document.visibilityState?function(e,t,{w:n,h:r}={}){const i=function(e,{w:t,h:n}={}){let{width:r,height:i,left:o,top:d,right:s,bottom:a}=e.getBoundingClientRect();(0===r||0===i)&&t&&n&&(r=t,i=n,s=o+t,a=d+n);return{width:r,height:i,left:o,top:d,right:s,bottom:a}}(e,{w:n,h:r}),o=function(e){const t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom};for(let n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},i]);let d,s;if(null!==o)return d=o.width*o.height,s=i.width*i.height,d/s*100;return 0}(e,t,{w:n,h:r}):0}function d(e){return document.getElementById(e)||document.getElementById(function(e){if(window.googletag&&isFn(window.googletag.pubads)&&isFn(window.googletag.pubads().getSlots)){const t=googletag.pubads().getSlots(),n=u.isSlotMatchingAdUnitCode(e);for(let r=0;r<t.length;r++)if(n(t[r])){const n=t[r].getSlotElementId();return u.log(`[33Across Adapter] Map ad unit path to HTML element id: '${e}' -> ${n}`),n}}return u.log(`[33Across Adapter] Unable to locate element for ad unit code: '${e}'`),null}(e))}function s(t,n={},s){const c={},p=t.params,l=d(t.adUnitCode),f=function(e){if(u.isArray(e)&&2===e.length&&!u.isArray(e[0]))return[a(e)];return e.map(a)}(t.sizes),g=function(e){return e.reduce((e,t)=>t.h*t.w<e.h*e.w?t:e)}(f),h=function(e){return function(t){const n=Object.assign({},t),r=n.imp=n.imp.map(e=>Object.assign({},e)),i=r[0].banner=Object.assign({},r[0].banner),o=i.ext=Object.assign({},i.ext);return(o.ttx=Object.assign({},o.ttx)).viewability={amount:isNaN(e)?e:Math.round(e)},n}}(i(l)?o(l,window.top,g):r);c.imp=[],c.imp[0]={banner:{format:f.map(e=>Object.assign(e,{ext:{}}))},ext:{ttx:{prod:p.productId}}},c.site={id:p.siteId},s&&(c.site.page=s),c.id=t.bidId,c.user={ext:{consent:n.consentString}},c.regs={ext:{gdpr:!0===n.gdprApplies?1:0}},c.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"$prebid.version$"}]}};return{method:"POST",url:e,data:JSON.stringify(h(c)),options:{contentType:"text/plain",withCredentials:!0},bidIds:[t.bidId]}}function a(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}return{NON_MEASURABLE:r,code:"33across",buildRequests:function(e,t){const r=Object.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent),i=t&&t.refererInfo?t.refererInfo.referer:void 0;return n.uniqueSiteIds=e.map(e=>e.params.siteId).filter(u.uniques),e.map(e=>s(e,r,i))},interpretResponse:function(e,t){const n=[];var r;return e.body.seatbid.length>0&&e.body.seatbid[0].bid.length>0&&n.push({requestId:(r=e.body).id,cpm:r.seatbid[0].bid[0].price,width:r.seatbid[0].bid[0].w,height:r.seatbid[0].bid[0].h,ad:r.seatbid[0].bid[0].adm,ttl:r.seatbid[0].bid[0].ttl||60,creativeId:r.seatbid[0].bid[0].crid,currency:r.cur,netRevenue:!0}),n},getUserSyncs:function(e,r,i){return e.iframeEnabled?n.uniqueSiteIds.map(e=>(function({siteId:e="zzz000000000003zzz",gdprConsent:n={}}){const r=t,{consentString:i,gdprApplies:o}=n,d={type:"iframe",url:`${r}&id=${e}&gdpr_consent=${encodeURIComponent(i)}`};return"boolean"==typeof o&&(d.url+=`&gdpr=${Number(o)}`),d})({gdprConsent:i,siteId:e})):[]}}},function(){return{code:"admixer",aliases:["go2net"],buildRequests:function(e,t){const n={imps:[],referrer:encodeURIComponent(t.refererInfo.referer)};e.forEach(e=>{n.imps.push(e)});const r=JSON.stringify(n);return{method:"GET",bidIds:e.map(e=>e.bidId),url:"https://inv-nets.admixer.net/prebid.1.0.aspx",data:`data=${r}`}},interpretResponse:function(e,t){const n=[];try{(e=e.body).forEach(e=>{const t={requestId:e.bidId,cpm:e.cpm,width:e.width,height:e.height,ad:e.ad,ttl:e.ttl,creativeId:e.creativeId,netRevenue:e.netRevenue,currency:e.currency,vastUrl:e.vastUrl};n.push(t)})}catch(e){u.log(e)}return n}}},function(){const e={};var t,n=(t=0,function(){var e=++t%3;return"ghb"+(e=e||"")});return{code:"adtelligent",aliases:["onefiftytwomedia","vertamedia","adtelligentMarket"],getUserSyncs:function(t,n){const r=[];function i(n){const i=n.cookieURLs,o=n.cookieURLSTypes||[];Array.isArray(i)&&i.forEach((n,i)=>{const d=o[i]||"image";!t.pixelEnabled&&"image"==d||!t.iframeEnabled&&"iframe"==d||e[n+d]||(e[n+d]=!0,r.push({type:d,url:n}))})}return(t.pixelEnabled||t.iframeEnabled)&&u.isArray(n)&&n.forEach(e=>{e.body&&(u.isArray(e.body)?e.body.forEach(e=>{i(e)}):i(e.body))}),r},buildRequests:function(e,t){return{data:function(e,t){const n={domain:u.deepAccess(t,"refererInfo.referer")};t.timeout&&(n.tmax=t.timeout-60);u.deepAccess(t,"bidderRequest.uspConsent")&&(n.us_privacy=t.uspConsent);try{i&&(n.vpbv=i.VPB_VERSION,n.session_id=i.SESSION_ID)}catch(e){}u.deepAccess(t,"gdprConsent.gdprApplies")&&(n.gdpr=1,n.gdpr_consent=u.deepAccess(t,"gdprConsent.consentString"));u.deepAccess(t,"bidderRequest.uspConsent")&&(n.us_privacy=t.uspConsent);for(let t=0,r=e.length;t<r;t++)Object.assign(n,o(t,e[t]));return n}(e,t),bidderRequest:t,bidIds:e.map(e=>e.bidId),method:"GET",url:"https://"+n()+".adtelligent.com/auction/"}},interpretResponse:function(e,{bidderRequest:t}){e=e.body;let n=[];return u.isArray(e)?(e.forEach(e=>{n=n.concat(r(e,t))}),n):r(e,t)}};function r(e,t){const n=[];return e&&u.isArray(e.bids)?(e.bids.forEach(e=>{const r=u.find(t.bids,t=>t.bidId===e.requestId);if(0!==e.cpm&&void 0!==r){const t=function(e,t){const n={requestId:e.requestId,creativeId:e.creativeId,cpmId:e.cmpId,height:e.height,currency:e.cur,width:e.width,cpm:e.cpm,netRevenue:!0,mediaType:t,ttl:300};return Object.assign(n,{ad:e.ad})}(e,"display");n.push(t)}}),n):n}function o(e,t){const n=e?`${e+1}`:"",r=u.deepAccess(t,"mediaTypes.banner.sizes"),i={["callbackId"+n]:t.bidId,["ad_type"+n]:"display",["sizes"+n]:u.parseSizesInput(r).join()};return t.params.pid?(i["pid"+n]=t.params.pid,i["override_id"+n]=t.params.overrideId):i["aid"+n]=t.params.aid,t.params.vpb_placement_id&&(i["placement_id"+n]=t.params.vpb_placement_id),i}},function(){const e="https://ib.adnxs.com/ut/v3/prebid";function t(e){const t={};return t.sizes=function(e){const t=[];let n={};if(u.isArray(e)&&2===e.length&&!u.isArray(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"==typeof e)for(let r=0;r<e.length;r++){const i=e[r];(n={}).width=parseInt(i[0],10),n.height=parseInt(i[1],10),t.push(n)}return t}(e.sizes),t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=e.bidId,e.params.placementId?t.id=parseInt(e.params.placementId,10):t.code=e.params.invCode,t.allow_smaller_sizes=e.params.allowSmallerSizes||!1,t.use_pmt_rule=e.params.usePaymentRule||!1,t.prebid=!0,t.disable_psa=!0,t.ad_types.push("banner"),t}return{code:"appnexus",aliases:["appnexusAst","brealtime","emxdigital","pagescience","defymedia","gourmetads","matomy","featureforward","oftmedia","districtm","adasta","automatadC"],buildRequests:function(n,r){const i=n.map(t),o=n[0].schain,d={tags:[...i],user:{},sdk:{source:"pbjs",version:"3.10.0"},schain:o};if(r&&r.gdprConsent&&(d.gdpr_consent={consent_string:r.gdprConsent.consentString,consent_required:r.gdprConsent.gdprApplies}),r&&r.uspConsent&&(d.us_privacy=r.uspConsent),r&&r.refererInfo){const e={rd_ref:encodeURIComponent(r.refererInfo.referer),rd_top:r.refererInfo.reachedTop,rd_ifs:r.refererInfo.numIframes,rd_stk:r.refererInfo.stack.map(e=>encodeURIComponent(e)).join(",")};d.referrer_detection=e}return function(t,n){let r=[];const i=JSON.stringify(t);return r={method:"POST",url:e,data:i,bidIds:t.tags.map(e=>e.uuid),bidderRequest:n}}(d,r)},interpretResponse:function(e,{bidderRequest:t}){const n=[];if(!(e=e.body)||e.error){let r=`in response for ${t.bidderCode} adapter`;return e&&e.error&&(r+=`: ${e.error}`),u.log(r),n}var r;return e.tags&&e.tags.forEach(e=>{const i=(r=e)&&r.ads&&r.ads.length&&u.find(r.ads,e=>e.rtb);if(i&&0!==i.cpm){const r=function(e,t,n){const r=u.find(n.bids,function(t){return e.uuid===t.bidId}),i={requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};t.advertiser_id&&(i.meta=Object.assign({},i.meta,{advertiserId:t.advertiser_id}));Object.assign(i,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{const e=t.rtb.trackers[0].impression_urls[0],n=u.createTrackPixelHtml(e);i.ad+=n}catch(e){u.log("Error appending tracking pixel",e)}return i}(e,i,t);r.mediaType="banner",n.push(r)}}),n},getUserSyncs:function(e){if(e.iframeEnabled)return[{type:"iframe",url:"https://acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html"}]}}},function(){const e=31,t="https://bidder.criteo.com/cdb",n=207;function r(e){return e[0]+"x"+e[1]}return{code:"criteo",gvlid:91,buildRequests:(i,o)=>{const d=function(e,t){let n="";t&&t.refererInfo&&(n=t.refererInfo.referer);const r={url:n,debug:!1,noLog:!1,amp:!1};return e.forEach(e=>{"amp"===e.params.integrationMode&&(r.amp=!0)}),r}(i,o),s=function(r){let i=t;i+="?profileId="+n,i+="&av="+String(e),i+="&wv="+encodeURIComponent("3.22"),i+="&cb="+String(Math.floor(99999999999*Math.random())),r.amp&&(i+="&im=1");r.debug&&(i+="&debug=1");r.noLog&&(i+="&nolog=1");return i}(d),a=function(e,t,n){let i;const o={publisher:{url:e.url,ext:n.publisherExt},slots:t.map(e=>{i=e.params.networkId||i;const t={impid:e.adUnitCode,transactionid:e.transactionId,auctionId:e.auctionId};return e.params.zoneId&&(t.zoneid=e.params.zoneId),e.fpd&&e.fpd.context&&(t.ext=e.fpd.context),e.params.ext&&(t.ext=Object.assign({},t.ext,e.params.ext)),e.params.publisherSubId&&(t.publishersubid=e.params.publisherSubId),t.sizes=function(e,t){if(Array.isArray(e[0]))return e.map(e=>t(e));return[t(e)]}((e=e,u.deepAccess(e,"mediaTypes.banner.sizes")||e.sizes),r),t})};var d;i&&(o.publisher.networkid=i);o.user={ext:n.userExt},n&&n.ceh&&(o.user.ceh=n.ceh);n&&n.gdprConsent&&(o.gdprConsent={},void 0!==n.gdprConsent.gdprApplies&&(o.gdprConsent.gdprApplies=!!n.gdprConsent.gdprApplies),o.gdprConsent.version=n.gdprConsent.apiVersion,void 0!==n.gdprConsent.consentString&&(o.gdprConsent.consentData=n.gdprConsent.consentString));n&&n.uspConsent&&(o.user.uspIab=n.uspConsent);return o}(d,i,o);if(a)return{method:"POST",url:s,data:JSON.stringify(a),bidRequests:i,bidIds:i.map(e=>e.bidId)}},interpretResponse:(e,t)=>{const n=e.body||e,r=[];return n&&n.slots&&u.isArray(n.slots)&&n.slots.forEach(e=>{const n=u.find(t.bidRequests,t=>t.adUnitCode===e.impid&&(!t.params.zoneId||parseInt(t.params.zoneId)===e.zoneid)).bidId,i={requestId:n,cpm:e.cpm,currency:e.currency,netRevenue:!0,ttl:e.ttl||60,creativeId:n,width:e.width,height:e.height,dealId:e.dealCode};i.ad=e.creative,r.push(i)}),r}}},function(){function e(e,t){return e.sizes&&e.sizes.length?u.parseSizesInput(t?e.sizes[0]:e.sizes).join(","):NULL_SIZE}function t(e){let t;try{t=(t=u.getDataFromLocalStorage(e))?window.parseInt(t,10)+1:1,u.setDataInLocalStorage(e,t)}catch(e){return!1}return!0}function n(){const e=5,t=1e3,n=.5;let r,i;function o(e,t,n){let r=0;return function(e,t,n){return t>e||n<0}(e,t,n)||(r=function(e){return e<0}(t)?n/(n-t):function(e,t){return t<e}(e,n)?1:(e-t)/(n-t)),r}function d(e){return i}function s(e){const t=e.getBoundingClientRect();return function(e){return o(d().innerHeight,e.top,e.bottom)}(t)*function(e){return o(d().innerWidth,e.left,e.right)}(t)>n}function a(e){return null!==e&&void 0!==e}function c(e){var t;return i=(t=e)&&window.document.body.contains(t)?window:window.top.document.body.contains(t)?top:void 0,(window===window.top||window.frameElement)&&a(d())&&d().top.document.hasFocus()&&function(e){return e.offsetHeight>0&&e.offsetWidth>0}(e)&&function(e){return"hidden"!==d().getComputedStyle(e).visibility}(e)&&function e(t){const n=t.style,r=t.parentNode;return!(n&&0===parseFloat(n.opacity))&&(!r||e(r))}(e)&&s(e)&&(!a(d().frameElement)||c(d().frameElement))}return r={isVisible:c,onView:function n(r,i,o){const d=c(i)?r+1:0;d===e?o():setTimeout(n.bind(this,d,i,o),t/e)}.bind(this,0)}}return{code:"eplanning",buildRequests:function(r,i){let o,d;const s={};r.forEach(e=>{["ci","sv","t","ml"].forEach(t=>{e.params[t]&&!s[t]&&(s[t]=e.params[t])})});const a=function(){try{return window.top.document.charset||window.top.document.characterSet}catch(e){return document.charset||document.characterSet}}(),c=function(t,n){const r=function(t){const n={};return t.forEach(t=>{const r=e(t,!0);n[r]=n[r]?n[r]:[],n[r].push(t)}),n}(t),i={str:"",vs:"",map:{}};return i.str=Object.keys(r).map(t=>r[t].map((t,r)=>{i.vs+=function(e){let t,n="";return window&&window.localStorage?(t=function(e){const t=u.getDataFromLocalStorage("pbsr_"+e.adUnitCode)||0,n=u.getDataFromLocalStorage("pbvi_"+e.adUnitCode)||0,r=t>0?n/t:0;return{render:t,ratio:window.parseInt(10*r,10)}}(e),n+=t.render>=4?t.ratio.toString(16):"F"):n+="F",n}(t);const o=n?t.adUnitCode.replace(/_|\.|-|\//g,"").replace(/\)\(|\(|\)|:/g,"_").replace(/^_+|_+$/g,""):e(t,!0)+"_"+r;return i.map[o]=t.bidId,o+":"+e(t)}).join("+")).join("+"),i}(r,s.ml),p=i.refererInfo.referer;if(s.t)o="https://"+s.isv+"/layers/t_pbjs_2.json",d={};else{o="https://"+(s.sv||"ads.us.e-planning.net")+"/hb/1/"+s.ci+"/1/"+(e=>{const t=document.createElement("a");return t.href=e,t.hostname})(p)+"/ROS";const e=i.refererInfo.referer.reachedTop?encodeURIComponent(window.top.document.referrer):encodeURIComponent(i.refererInfo.referer);window&&window.localStorage&&function(e){const r=[];e.forEach(e=>{const i=document.getElementById(e.adUnitCode);i?(t("pbsr_"+i.id),n().onView(i,t.bind(void 0,"pbvi_"+i.id))):r.push(e.adUnitCode)}),r.length&&function(e){const r=new MutationObserver(function(r,i){r&&Array.isArray(r)&&r.forEach(r=>{r&&r.addedNodes&&Array.isArray(r.addedNodes)&&r.addedNodes.forEach(r=>{const o=e.indexOf(r.id);o>=0&&(t("pbsr_"+r.id),n().onView(r,t.bind(void 0,"pbvi_"+r.id)),e.splice(o,1),e.length||i.disconnect())})})});document.addEventListener("DOMContentLoaded",function(e){r.observe(document.body,{childList:!0,subtree:!0,characterData:!0})})}(r)}(r),d={rnd:Math.random(),e:c.str,ur:encodeURIComponent(p||"file"),r:"pbjs",pbv:"$prebid.version$",ncb:"1",vs:c.vs},a&&(d.crs=a),e&&(d.fr=e),i&&i.gdprConsent&&void 0!==i.gdprConsent.gdprApplies&&(d.gdpr=i.gdprConsent.gdprApplies?"1":"0",void 0!==i.gdprConsent.consentString&&(d.gdprcs=i.gdprConsent.consentString)),i&&i.uspConsent&&(d.ccpa=i.uspConsent)}return{method:"GET",url:o,data:d,adUnitToBidId:c.map,bidIds:r.map(e=>e.bidId)}},interpretResponse:function(e,t){const n=e.body,r=[];return n&&!u.isEmpty(n.sp)&&n.sp.forEach(e=>{u.isEmpty(e.a)||e.a.forEach(n=>{const i={requestId:t.adUnitToBidId[e.k],cpm:n.pr,width:n.w,height:n.h,ad:n.adm,ttl:120,creativeId:n.crid,netRevenue:!0,currency:"USD"};r.push(i)})}),r},getUserSyncs:function(e,t){const n=[],r=!u.isEmpty(t)&&t[0].body;if(r&&!u.isEmpty(r.cs)){r.cs.forEach(t=>{"string"==typeof t&&e.pixelEnabled?n.push({type:"image",url:t}):"object"==typeof t&&t.ifr&&e.iframeEnabled&&n.push({type:"iframe",url:t.u})})}return n}}},function(){return{version:"6.1.0",code:"improvedigital",aliases:["id"],buildRequests:function(e,t){const n=e.map(e=>(function(e){const t=e.adUnitCode||null,n=e.params.placementId||null;let r=null,i=null;null===n&&(r=e.params.publisherId||null,i=e.params.placementKey||null);const o=e.params.keyValues||null,d=e.params.size||null,s=e.bidId,a=e.transactionId,c=e.params.bidFloor,u=e.params.bidFloorCur,p={};n?p.placementId=n:(r&&(p.publisherId=r),i&&(p.placementKey=i));o&&(p.keyValues=o);d&&d.w&&d.h&&(p.size={},p.size.h=d.h,p.size.w=d.w);s&&(p.id=s);t&&(p.adUnitId=t);a&&(p.transactionId=a);p.currency="USD";c&&(p.bidFloor=c,p.bidFloorCur=u?u.toUpperCase():"USD");return p})(e)),r=new function(e){this.CONSTANTS={AD_SERVER_BASE_URL:"ice.360yield.com",END_POINT:e||"hb",AD_SERVER_URL_PARAM:"jsonp=",CLIENT_VERSION:"JS-6.3.0",MAX_URL_LENGTH:2083,ERROR_CODES:{MISSING_PLACEMENT_PARAMS:2,LIB_VERSION_MISSING:3},RETURN_OBJ_TYPE:{DEFAULT:0,URL_PARAMS_SPLIT:1}},this.getErrorReturn=function(e){return{idMappings:{},requests:{},errorCode:e}},this.createRequest=function(e,t,n){if(!t.libVersion)return this.getErrorReturn(this.CONSTANTS.ERROR_CODES.LIB_VERSION_MISSING);t.returnObjType=t.returnObjType||this.CONSTANTS.RETURN_OBJ_TYPE.DEFAULT,t.adServerBaseUrl="https://"+(t.adServerBaseUrl||this.CONSTANTS.AD_SERVER_BASE_URL);const r=[];let i;if(u.isArray(e))for(let t=0;t<e.length;t++)i=this.createImpressionObject(e[t]),r.push(i);else i=this.createImpressionObject(e),r.push(i);let o=!0;t.returnObjType===this.CONSTANTS.RETURN_OBJ_TYPE.URL_PARAMS_SPLIT&&(o=!1);const d={requests:[]};o&&(d.idMappings=[]);let s=null;const a=`${t.adServerBaseUrl}/${this.CONSTANTS.END_POINT}?${this.CONSTANTS.AD_SERVER_URL_PARAM}`;let c={bid_request:this.createBasicBidRequestObject(t,n)};for(let e=0;e<r.length;e++)if((i=r[e]).errorCode)(s=s||[]).push({errorCode:i.errorCode,adUnitId:i.adUnitId});else{o&&d.idMappings.push({adUnitId:i.adUnitId,id:i.impressionObject.id}),c.bid_request.imp=c.bid_request.imp||[],c.bid_request.imp.push(i.impressionObject);let s=!1;const u=a+encodeURIComponent(JSON.stringify(c));u.length>this.CONSTANTS.MAX_URL_LENGTH&&(s=!0,c.bid_request.imp.length>1&&(c.bid_request.imp.pop(),o&&d.idMappings.pop(),e--)),!s&&t.singleRequestMode&&e!==r.length-1||(d.requests.push(this.formatRequest(t,c)),c={bid_request:this.createBasicBidRequestObject(t,n)})}return s&&(d.errors=s),d},this.formatRequest=function(e,t){switch(e.returnObjType){case this.CONSTANTS.RETURN_OBJ_TYPE.URL_PARAMS_SPLIT:return{method:"GET",bidIds:t.bid_request.imp.map(e=>e.id),url:`${e.adServerBaseUrl}/${this.CONSTANTS.END_POINT}`,data:`${this.CONSTANTS.AD_SERVER_URL_PARAM}${encodeURIComponent(JSON.stringify(t))}`};default:const n=`${e.adServerBaseUrl}/`+`${this.CONSTANTS.END_POINT}?${this.CONSTANTS.AD_SERVER_URL_PARAM}`;return{url:n+encodeURIComponent(JSON.stringify(t))}}},this.createBasicBidRequestObject=function(e,t){const n={secure:1};if(e.requestId?n.id=e.requestId:n.id=u.genId(),e.domain&&(n.domain=e.domain),e.page&&(n.page=e.page),e.ref&&(n.ref=e.ref),e.callback&&(n.callback=e.callback),e.libVersion&&(n.version=e.libVersion+"-"+this.CONSTANTS.CLIENT_VERSION),e.referrer&&(n.referrer=e.referrer),(e.gdpr||0===e.gdpr)&&(n.gdpr=e.gdpr),e.usPrivacy&&(n.us_privacy=e.usPrivacy),e.schain&&(n.schain=e.schain),t)for(const e in t)n[e]=t[e];return n},this.createImpressionObject=function(e){const t={},n={};if(t.impressionObject=n,e.id?n.id=e.id:n.id=u.genId(),e.adTypes&&(n.ad_types=e.adTypes),e.adUnitId&&(t.adUnitId=e.adUnitId),e.currency&&(n.currency=e.currency.toUpperCase()),e.bidFloor&&(n.bidfloor=e.bidFloor),e.bidFloorCur&&(n.bidfloorcur=e.bidFloorCur.toUpperCase()),e.placementId&&(n.pid=e.placementId),e.publisherId&&(n.pubid=e.publisherId),e.placementKey&&(n.pkey=e.placementKey),e.transactionId&&(n.tid=e.transactionId),e.keyValues)for(const t in e.keyValues)for(let r=0;r<e.keyValues[t].length;r++)n.kvw=n.kvw||{},n.kvw[t]=n.kvw[t]||[],n.kvw[t].push(e.keyValues[t][r]);if(n.banner={},e.size&&e.size.w&&e.size.h&&(n.banner.w=e.size.w,n.banner.h=e.size.h),e.format&&u.isArray(e.format)){const t=e.format.filter(e=>2===e.length&&e[0]>=0&&e[1]>=0).map(e=>({w:e[0],h:e[1]}));t.length>0&&(n.banner.format=t)}return n.pid||n.pubid||n.pkey||n.banner&&n.banner.w&&n.banner.h||(t.impressionObject=null,t.errorCode=this.CONSTANTS.ERROR_CODES.MISSING_PLACEMENT_PARAMS),t}}("hb"),i={singleRequestMode:!0,returnObjType:r.CONSTANTS.RETURN_OBJ_TYPE.URL_PARAMS_SPLIT,libVersion:this.version};t&&t.gdprConsent&&t.gdprConsent.consentString&&(i.gdpr=t.gdprConsent.consentString),t&&t.uspConsent&&(i.usPrivacy=t.uspConsent),t&&t.refererInfo&&t.refererInfo.referer&&(i.referrer=t.refererInfo.referer),i.schain=e[0].schain;const o=r.createRequest(n,i);return o.errors&&o.errors.length>0&&u.log("ID WARNING 0x01"),o.requests},interpretResponse:function(e,t){const n=[];return u._each(e.body.bid,function(e){if(!e.price||null===e.price||e.hasOwnProperty("errorCode")||!e.adm&&!e.native)return;const r={};let i="";if(e.nurl&&e.nurl.length>0&&(i=`<img src="${e.nurl}" width="0" height="0" style="display:none">`),r.ad=`${i}<script>${e.adm}<\/script>`,r.mediaType="banner",r.adId=e.id,r.cpm=parseFloat(e.price),r.creativeId=e.crid,r.currency=e.currency?e.currency.toUpperCase():"USD",u.isNumber(e.lid)&&"deal_id"===e.buying_type)r.dealId=e.lid;else if(Array.isArray(e.lid)&&Array.isArray(e.buying_type)&&e.lid.length===e.buying_type.length){let t=!1;e.buying_type.forEach((n,i)=>{t||"deal_id"===n&&(t=!0,r.dealId=e.lid[i])})}r.height=e.h,r.netRevenue=!!e.isNet&&e.isNet,r.requestId=e.id,r.ttl=300,r.width=e.w,r.width&&r.height||(r.width=1,r.height=1,t.sizes&&(r.width=t.sizes[0][0],r.height=t.sizes[0][1])),n.push(r)}),n},getUserSyncs:function(e,t){if(e.pixelEnabled){const e=[];return t.forEach(t=>{t.body.bid.forEach(t=>{u.isArray(t.sync)&&t.sync.forEach(t=>{-1===e.indexOf(t)&&e.push(t)})})}),e.map(e=>({type:"image",url:e}))}return[]}}},function(){const e="https://onetag-sys.com/prebid-request",t="https://onetag-sys.com/usync/",n="banner";function r(e){const t={},n=e.params;t.adUnitCode=e.adUnitCode,t.bidId=e.bidId,t.bidderRequestId=e.bidderRequestId,t.auctionId=e.auctionId,t.transactionId=e.transactionId,t.sizes=[];const r=e.sizes;for(let e=0,n=r.length;e<n;e++){const n=r[e];t.sizes.push({width:n[0],height:n[1]})}return t.pubId=n.pubId,n.type&&(t.type=n.type),n.pubClick&&(t.click=n.pubClick),n.dealId&&(t.dealId=n.dealId),t}return{code:"onetag",supportedMediaTypes:[n],buildRequests:function(t,n){const i={bids:t.map(r)},o=function(){let e,t,n,r,i,o,d,s,a;for(e=window,t=e.document,n=t.location.href,r=t.referrer,i=0,d=encodeURIComponent,s=new Date,a=screen;e!==e.parent;)try{o=e.parent,n=o.location.href,r=o.document.referrer,e=o}catch(d){i=top!==e.parent?2:1;break}return{location:d(n),referrer:d(r)||"0",masked:i,wWidth:e.innerWidth,wHeight:e.innerHeight,oWidth:e.outerWidth,oHeight:e.outerHeight,sWidth:a.width,sHeight:a.height,aWidth:a.availWidth,aHeight:a.availHeight,sLeft:"screenLeft"in e?e.screenLeft:e.screenX,sTop:"screenTop"in e?e.screenTop:e.screenY,hLength:history.length,date:s.toUTCString(),timeOffset:s.getTimezoneOffset()}}(),d=Object.assign(i,o);n&&n.gdprConsent&&(d.gdprConsent={consentString:n.gdprConsent.consentString,consentRequired:n.gdprConsent.gdprApplies}),n&&n.uspConsent&&(d.usPrivacy=n.uspConsent);const s=JSON.stringify(d);return{method:"POST",url:e,bidIds:t.map(e=>e.bidId),data:s}},interpretResponse:function(e,t){let r=e.body;const i=[];if("string"==typeof e)try{r=JSON.parse(e)}catch(e){return i}return!r||r.nobid&&!0===r.nobid?i:(r.bids&&r.bids.forEach(function(e){i.push({requestId:e.requestId,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.creativeId,dealId:e.dealId?e.dealId:"",currency:e.currency,netRevenue:!1,mediaType:i.type?i.type:n,ad:e.ad,ttl:e.ttl||300})}),i)},getUserSyncs:function(e,n,r,i){const o=[];if(e.iframeEnabled){let e="?cb="+(new Date).getTime();r&&"string"==typeof r.consentString&&(e+="&gdpr_consent="+r.consentString,"boolean"==typeof r.gdprApplies&&(e+="&gdpr="+(r.gdprApplies?1:0))),i&&"string"==typeof i&&(e+="&us_privacy="+i),o.push({type:"iframe",url:t+e})}return o}}},function(){const e=["USD"],t=55;return{code:"rtbhouse",supportedMediaTypes:["banner"],buildRequests:function(t,n){const r={id:t[0].auctionId,imp:t.map(e=>(function(e){const t={id:e.bidId,banner:function(e){if("banner"===e.mediaType||u.deepAccess(e,"mediaTypes.banner")||!e.mediaType&&!e.mediaTypes){var t=e.sizes||e.mediaTypes.banner.sizes;return{w:t[0][0],h:t[0][1],format:t.map(e=>({w:e[0],h:e[1]}))}}}(e),tagid:e.adUnitCode.toString()},n=parseFloat(e.params.bidfloor);n&&(t.bidfloor=n);return t})(e)),site:function(e,t){return{publisher:{id:(e&&e.length>0?e[0].params.publisherId:"unknown").toString()},page:t.refererInfo.referer,name:window.location.origin||""}}(t,n),cur:e,test:t[0].params.test||0,source:{tid:t[0].transactionId}};if(n&&n.gdprConsent&&n.gdprConsent.gdprApplies){const e=n.gdprConsent.consentString?n.gdprConsent.consentString.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):"",t=n.gdprConsent.gdprApplies?1:0;r.regs={ext:{gdpr:t}},r.user={ext:{consent:e}}}return{method:"POST",url:"https://"+t[0].params.region+".creativecdn.com/bidder/prebid/bids",data:JSON.stringify(r),bidIds:t.map(e=>e.bidId)}},interpretResponse:function(e,n){const r=e.body;if(!u.isArray(r))return[];const i=[];var o;return r.forEach(e=>{0!==e.price&&i.push({requestId:(e=e).impid,mediaType:"banner",cpm:e.price,creativeId:e.adid,ad:e.adm,width:e.w,height:e.h,ttl:t,netRevenue:!0,currency:"USD"})}),i}}}],s=(o=0,function(){return++o});function a(e){return e[0]+"x"+e[1]}function c(e,t){return toString.call(e)==="[object "+t+"]"}var u={loadScript:function(e,t,n){var r=document.createElement("script");e=("http:"===document.location.protocol?"http:":"https:")+e,r.src=e,r.async=!0,r.onload=t,r.onerror=n,(document.body||document.head||document.documentElement).appendChild(r)},buildUrl:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?`:${e.port}`:""))+(e.pathname||"")+(e.search?`?${this.formatQS(e.search||"")}`:"")+(e.hash?`#${e.hash}`:"")},formatQS:function(e){return Object.keys(e).map(t=>Array.isArray(e[t])?e[t].map(e=>`${t}[]=${e}`).join("&"):`${t}=${e[t]}`).join("&")},ajax:function(e){var t=null;if(e.method=(e.method||"GET").toUpperCase(),window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){u.log("error")}}if(!t)return alert("Giving up :( Cannot create an XMLHTTP instance"),e.onError&&e.onError(),!1;try{t.withCredentials=e.sendCookie||!1}catch(e){}if(e.timeout&&(t.timeout=e.timeout),t.onreadystatechange=function(){4===t.readyState&&(t.status>=200&&t.status<300?e.onSuccess&&e.onSuccess(t.responseText):e.onError&&e.onError(t.status))},e.sync=!e.sync,t.open(e.method,e.url||e.uri,e.sync),e.headers)for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);return t.send(e.data?e.data:null),this},createTrackPixelHtml:function(e){if(!e)return"";let t='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return t+='<img src="'+encodeURI(e)+'"></div>'},isFn:function(e){return c(e,"Function")},isStr:function(e){return c(e,"String")},isArray:function(e){return c(e,"Array")},isNumber:function(e){return c(e,"Number")},isPlainObject:function(e){return c(e,"Object")},isBoolean:function(e){return c(e,"Boolean")},_each(e,t){var n=0,r=e.length;if(r>0)for(;n<r;n++)t(e[n],n,e);else for(n in e)hasOwnProperty.call(e,n)&&t.call(this,e[n],n)},debounce:function(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(r,i)},t)}},replaceAuctionPrice:function(e,t){if(e)return e.replace(/\$\{AUCTION_PRICE\}/g,t)},timeDiff:function(e){return Math.min(Math.abs(u.now()-e),4294967295)},parseSizesInput:function(e){var t=[];if("string"==typeof e){var n=e.split(","),r=/^(\d)+x(\d)+$/i;if(n)for(var i in n)hasOwn(n,i)&&n[i].match(r)&&t.push(n[i])}else if("object"==typeof e){var o=e.length;if(o>0)if(2===o&&"number"==typeof e[0]&&"number"==typeof e[1])t.push(a(e));else for(var d=0;d<o;d++)t.push(a(e[d]))}return t},log:function(){if(window.localStorage&&window.localStorage.vpbdebug>="1"){var e=Array.prototype.slice.call(arguments,0);window.localStorage&&window.localStorage.vpbdebug>="2"&&e.unshift(performance.now()),e.unshift("VPB: "),console.log.apply(console,e)}},copy:function(e){var t,n,r;for(r in t=Array.isArray(e)?[]:{},e)Object.prototype.hasOwnProperty.call(e,r)&&(n=e[r],t[r]=null===n?null:"object"==typeof n?u.copy(n):n);return t},now:function(){return Date.now()},filter:function(e,t){if(!e)return e;for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},getTopWindow:function(e){var t=function(e){try{return e===e.top?e:e.parent.location.href?t(e.parent):e}catch(t){return e}};return t(e)},getTopDomain:function(){if(location.ancestorOrigins&&location.ancestorOrigins.length)return location.ancestorOrigins[location.ancestorOrigins.length-1];try{return u.getTopWindow(window).location.host}catch(e){return null}},find:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]},genId:function(){return s()+Math.random().toString(16).substr(2)},deepAccess:function(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e},insertPixel:function(e){new Image(1,1).src=e},insertIframe:function(e){const t=function(e,t=!0,n=""){return e?(t&&(e=encodeURI(e)),n&&(n=`sandbox="${n}"`),`<iframe ${n} id="${u.genId()}"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="${e}">\n    </iframe>`):""}(e,!1,"allow-scripts allow-same-origin"),n=document.createElement("div");n.innerHTML=t;const r=n.firstChild,i=document.getElementsByTagName("html")[0];i&&i.appendChild(r)},setDataInLocalStorage(e,t){window&&window.localStorage&&window.localStorage.setItem(e,t)},getDataFromLocalStorage(e){if(window&&window.localStorage)return window.localStorage.getItem(e)},isEmpty(e){if(!e)return!0;if("[object Array]"===toString.call(e)||"[object String]"===toString.call(e))return!(e.length>0);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},_map(e,t){if(this.isEmpty(e))return[];if(this.isFn(e.map))return e.map(t);var n=[];return this._each(e,function(r,i){n.push(t(r,i,e))}),n},inIframe(){try{return internal.getWindowSelf()!==internal.getWindowTop()}catch(e){return!0}},deepSetValue(e,t,n){t.split&&(t=t.split("."));for(var r,i=0,o=t.length,d=e;i<o;++i)r=d[t[i]],d=d[t[i]]=i===o-1?n:null!=r?r:!~t[i+1].indexOf(".")&&+t[i+1]>-1?[]:{}},isSlotMatchingAdUnitCode:e=>t=>compareCodeAndSlot(t,e),uniques:(e,t,n)=>n.indexOf(e)===t};const p={};let l,f=!1,g=e.timeout;if(i.maxThreshold&&(g=i.maxThreshold,i.st)){const e=u.timeDiff(i.st);g=g-e-70}i.VPB_VERSION="M048",e.loc=e.useStaticDomain?location.href:u.getTopDomain(),i.SESSION_ID=u.genId(),i.init_time=u.now();const h=new function(){const t=this,n=[],r=e.useStaticDomain?u.getTopDomain():e.loc,o="https://ghb.adtelligent.com",d=t.events={timeout:0,init:11,start:10,end:8,render:9,inView:18,inView1Sec:20,scoringBlock:21,preAucTimeout:22};let s=null;const a={},c={};function p(t,d){if(d=d||!1,!(t=t||n).length)return;const s={sessionID:i.SESSION_ID,fullPageURL:r,vpbv:i.VPB_VERSION,events:t.map(t=>Object.assign(t,{clientID:e.pubId,siteID:e.siteId}))};d&&navigator.sendBeacon?navigator.sendBeacon(o+"/adunit/hbimp",JSON.stringify(s)):u.ajax({uri:o+e.statPath,data:JSON.stringify(s),method:"POST",sendCookie:!0,sync:d}),t.length=0}window.IntersectionObserver&&(s=new IntersectionObserver(function(e){e.forEach(e=>{const t=e.target.id,n=c[t];if(e.isIntersecting&&e.intersectionRatio>=.5){const r=a[t];n&&(n.timeout=setTimeout(function(){s.unobserve(e.target),c[t]=!1,n.cb()},1e3)),a[t]=!1,r&&r(),r||n||s.unobserve(e.target)}else n&&clearTimeout(n.timeout)})},{root:null,rootMargin:"0px",threshold:[.49,.5]})),window.addEventListener("beforeunload",()=>{p(null,!0)}),window.addEventListener("unload",()=>{p(null,!0)}),t.send=u.debounce(p,1e3),t.log=function(e,r){r?p([e],!0):(n.push(e),t.send())},t.setupViewableWrapper=function(e,n){c[n.id]={cb:function(){t.sendWrapperInView(e),u.log("inview wrapper 20")}},s&&s.observe(n)},t.sendWrapperInView=function(e){t.singleTrack(["pubbid="+e,"event=20"])},t.sendInit=function(e){t.singleTrack(["pubbid="+(e||0),"event=11"])},t.singleTrack=function(t){try{const n=t||[];if(n.push("full_page_url="+encodeURIComponent(r)),n.push("adid="+i.SESSION_ID),n.push("vpbv="+i.VPB_VERSION),n.push("client_id="+e.pubId),n.push("site_id="+e.siteId),window.performance&&performance.now){const e=Math.floor(performance.now());n.push("lifecycle_tte="+e)}u.ajax({url:o+"/adunit/tracking?"+n.join("&"),sendCookie:!0})}catch(e){}},t.logEvent=function(e,n,r,o,p){if(e===d.preAucTimeout){const r=n;return void t.log({event:e,TTEms:Math.abs(r),lifecycleTTEms:u.timeDiff(i.init_time)})}e===d.timeout&&(r=r.map(e=>C.findOriginalBid(e)));const l={event:e===d.timeout?d.end:e,adunitID:n.id,subtype:p,code:n.code,lifecycleTTEms:u.timeDiff(i.init_time),bidders:r.map(function(t){const r={id:t.id,adapter:t.bidder,overrideId:t.overrideId,timeout:e===d.timeout};if([d.end,d.render,d.inView,d.inView1Sec,d.scoringBlock].includes(e)){const e=C.findOriginalBid(t.requestId);Object.assign(r,{winner:t.requestId===o,id:e.id,adapter:e.bidder,overrideId:e.overrideId,hbAdId:t.requestId,bid:parseFloat(t.clientBid||0),pubBid:parseFloat(t.pubBid||0),originalBid:1*t.originalCpm,originalCurrency:t.originalCurrency,grossBid:1*t.grossBid,netBid:1*t.netBid,currency:t.currency,sizes:[{w:t.width,h:t.height}],tte:t.tte})}else r.sizes=n.sizes.map(function(e){return{w:e[0],h:e[1]}});return r}),adType:2};if(e===t.events.render){if(t.log(l,!0),s){a[n.code]=function(){u.log("in view 18",n.code),t.logEvent(d.inView,n,r,o,p)},c[n.code]={cb:function(){u.log("inview 20",n.code,r[0].pubBid),t.logEvent(d.inView1Sec,n,r,o,p)}};const e=document.querySelector("#"+n.code);e&&s.observe(e)}}else t.log(l)}},m={};1!==i.noInit&&h.sendInit();const b={};let I=[];const y=[];let w=[];const v={},S={iframeEnabled:!0,pixelEnabled:!0};try{window.addEventListener("message",function(e){const t=e.message?"message":"data";let n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId){"GeoEdgeFallBack"===n.message&&i.geoEdgeFallBack(n.adId);const t=C.findBidResponse(n.adId);t&&"Prebid Request"===n.message&&e.source.postMessage(JSON.stringify({message:"Prebid Response",ad:u.replaceAuctionPrice(t.ad,t.originalCpm),adUrl:u.replaceAuctionPrice(t.adUrl,t.originalCpm),adId:t.adId,width:t.width,height:t.height}),n.adServerDomain)}})}catch(e){}function E(e,t){return u.find(t,function(t){return t.bidId===e||t.requestId===e||t.adId===e})}const C={groupByBidder:(R="bidder",function(e){return e.reduce(function(e,t){const n=t[R];return e[n]=(e[n]||[]).concat(t),e},{})}),findOriginalBid:function(e){return E(e,y)},findBidResponse:function(e){return E(e,w)},createIframe:function(e){const{cb:n,winner:r,doc:i}=e,o=i.createElement("iframe");o.id="vm-fr",o.onload=function(){if(t)return n&&n();const e=o.contentWindow.document;o.onload=null,n&&n(e)},o.src=t?"//player.adtelligent.com/prebid/iframe.html?adid="+r.adId+"&ref="+encodeURIComponent(location.origin):"";const d=o.style;return d.border="none",d.padding="0px",d.margin="0px",d.overflow="hidden",d.display="block",d.margin="0px auto",r&&(d.width=r.weight+"px",d.height=r.height+"px"),o},getAvailableBids:function(){return u.filter(w,function(e){return e.cpm>0&&e.responseTimestamp+1e3*e.ttl>u.now()&&"rendered"!==e.status&&"targetingSet"!==e.status})},getWinningBid:function(){const e=C.getAvailableBids();let t=e[0];for(let n=1;n<e.length;n++)m[e[n].creativeId]?u.log("filtered because geoEdge creative filter",e[n]):e[n].cpm>t.cpm&&(t=e[n]);return t},renderAd:function(e,t){const n=this,r=C.adapters[t.bidderCode];if(r.onBidWon&&r.onBidWon(t),t.ad&&(t.ad=u.replaceAuctionPrice(t.ad,t.originalCpm)),t.adUrl&&(t.adUrl=u.replaceAuctionPrice(t.adUrl,t.originalCpm)),e){if(t.status="rendered",u.log("rendering",t.requestId),t.adUrl){const r=t.adUrl;["ez","ez_mkp"].indexOf(t.bidderCode)>-1&&delete t.adUrl;const i=n.createIframe({doc:e,winner:t,cb(e){(e.parentWindow||e.defaultView).location.href=r}});e.body.innerHTML="",e.body.appendChild(i)}else e.open(),e.write(t.ad),e.close();const r=e.body.style;r.padding="0px",r.margin="0px",r.overflow="hidden"}},init:function(){const e=this;e.inited||(e.inited=!0,e.adapters={},u._each(d,function(t){const n=t();e.adapters[n.code]=n,n.aliases&&n.aliases.forEach(function(t){e.adapters[t]=n})}))},requestBids:function(t){const n=this;n.init();const r={numIframes:0,reachedTop:!0,referer:e.loc,stack:[e.loc]},i=u.copy(t.adUnits[0]),o={id:t.auctionId||u.genId(),st:u.now(),floored:[],bidsRequested:[],timeoutBidsIds:[]},d=n.groupByBidder(i.bids);let s=[];const a=[];for(const e in d){const t=u.genId(),c=u.genId(),p=d[e].map(function(n){const r=u.genId();return n.unitId=i.id,n.bidId=r,n.adUnitCode=i.code,n.bidderCode=e,y.push(n),{bidder:n.bidder,params:n.params,mediaTypes:i.mediaTypes,adUnitCode:i.code,transactionId:c,sizes:i.sizes,bidId:r,bidderRequestId:t,auctionId:o.id,src:"client",bidRequestsCount:1,bidderRequestsCount:1,bidderWinsCount:0}});o.bidsRequested=o.bidsRequested.concat(p);const l={timeout:g,auctionId:o.id,auctionStart:o.st,bidderCode:e,bidderRequestId:t,bids:p,refererInfo:r};let f=[];try{const t=n.adapters[e];if(t)if(t.buildRequests)f=t.buildRequests(p,l);else if(t.callBids){const n=u.now(),r=new Promise(function(e,n){const r=[];setTimeout(()=>{n(new Error("CallBidsTimeout"))},l.timeout),t.callBids(l,function(e,t){r.push(Promise.resolve(t))},function(){e(Promise.all(r))})}).catch(()=>(o.timeoutBidsIds=o.timeoutBidsIds.concat(p.map(e=>e.bidId)),null)).then(t=>t?{ad:e,bids:t,tte:u.now()-n}:{});a.push(r)}else u.log(e,"has no bid api");else u.log("No adapter ",e)}catch(t){u.log("error building request for ",e,t.message)}f&&!Array.isArray(f)&&(f=[f]),s=s.concat(f.map(function(t){return{reqObj:t,ad:e}}))}I=I.concat(o.bidsRequested);const c=s.map(function(e){let t=e.reqObj.data,n=e.reqObj.url;if("GET"===e.reqObj.method.toUpperCase()){if(u.isStr(t))n+="?"+t;else{const e=[];for(const n in t)e.push(n+"="+encodeURIComponent(t[n]));e.length&&(n+="?"+e.join("&"))}t=null}const r=u.now();return new Promise((r,i)=>{u.ajax({url:n,data:t,timeout:g,sendCookie:!0,method:e.reqObj.method,onSuccess:r,onError:i})}).then(function(t){try{t=JSON.parse(t)}catch(e){}return{ad:e.ad,response:{body:t},ref:e.reqObj,tte:u.now()-r}}).catch(t=>(0===t&&(o.timeoutBidsIds=o.timeoutBidsIds.concat(e.reqObj.bidIds)),{}))});Promise.all(c.concat(a)).then(function(r){let i=[];for(let d=0;d<r.length;d++){const s=r[d],a=s.ad,c=n.adapters[a];if(a&&c)try{const n=s.bids?s.bids:c.interpretResponse(s.response,s.ref);i=i.concat(n.map(n=>(n.adId=n.adId||n.requestId,n.tte=s.tte,n.width=parseInt(n.width),n.height=parseInt(n.height),n.bidderCode=n.bidderCode||a,n.creativeId=n.creativeId||"unknownCreativeId",n.responseTimestamp=u.now(),n.originalCurrency=n.currency||"USD",n.currency=e.cur._cur||"USD",n.originalCpm=n.originalCpm||n.cpm,n.cpm=n.originalCpm/e.cur[n.originalCurrency],t.adjust(n),n.floored&&o.floored.push(n),n)).filter(e=>e.cpm>0))}catch(e){u.log("error iterpreting response for",a,e.message)}}return o.bidResponses=i,w=w.concat(i),t.onEnd(o),r}).then(function(e){try{e.forEach(e=>{const t=e.ad;if(t&&n.adapters[t].getUserSyncs){const r=n.adapters[t].getUserSyncs(S,[e.response]);r&&r.length&&r.forEach(e=>{v[e.url]||(v[e.url]=!0,n.runSync(e))})}})}catch(e){u.log("unable to do syncs",e)}})},runSync:function(e){return"iframe"===e.type?u.insertIframe(e.url):u.insertPixel(e.url)}};var R;function _(e,t){const n=document.getElementById(t);if(!n)return!1;if(b[t]=e,e.refBid||(e.refBid=C.findBidResponse(e.adId)),h.logEvent(h.events.render,{id:e.adUnitId,code:t},[e.refBid],e.adId,e.run),n&&"IFRAME"===n.nodeName.toUpperCase()){const t=n.contentWindow.document,i="readystatechange";function r(){C.renderAd(t,e.refBid),t.removeEventListener(i,r)}"loading"===t.readyState?t.addEventListener(i,r):r()}else{const r=C.createIframe({cb:t=>{t&&C.renderAd(t,e.refBid)},winner:e,doc:document});r.id="adunit-"+t,n.innerHTML="",n.appendChild(r)}return 0===e.run&&i.getConfig("refreshInterval")&&A(t,e.requestSizes),!0}let T;function A(e,t){let n=0;g=5e3,clearInterval(T),T=setInterval(function(){f||i.auctionByAdUnitID({isRefresh:!0,run:++n,code:e,sizes:t,onEnd:function(t){f||t&&_(t,e)}})},i.getConfig("refreshInterval"))}function O(t){e.enhanceBid&&(t*=e.enhanceBid);const n=e.bidCeil;return n&&n>0&&t>n&&(t=n),t}function U(e){try{e&&e()}catch(e){u.log("Error executing que function",e)}}if(i.getConfig=function(t){return(void 0!==i[t]?i[t]:e[t])||null},i.geoEdgeFallBack=function(e,t){t=t||C.findOriginalBid(e).adUnitCode;const n=b[t],r=n.refBid||C.findBidResponse(n.adId);u.log("geo edge block for",n),m[r.creativeId]=1,h.logEvent(h.events.scoringBlock,{id:n.adUnitId,code:t},[r],n.adId,n.run);const o=C.getWinningBid();o?(o.status="targetingSet",_({width:o.width,height:o.height,adId:o.requestId,adUnitId:n.adUnitId,ad:o.ad,adUrl:o.adUrl,bid:O(o.cpm),requestSizes:n.requestSizes,run:++n.run},t)):i.auctionByAdUnitID({code:t,sizes:n.requestSizes,render:!0,run:++n.run})},i.win=function(e){const t=C.findOriginalBid(e),n=C.findBidResponse(e);n.status="rendered",h.logEvent(h.events.render,{id:t.unitId,code:t.adUnitCode},[n],e,0)},i.renderWhenReady=function(e){u.log("adding waiting render"),p[e.code]=e},i.getMGBid=function(e){u.log("adding MGBid waiter"),l=e.callback},i.trackPreInit=function(e,t,n,r){i.VPB_VERSION=n||i.VPB_VERSION,i.SESSION_ID=t||i.SESSION_ID,h.sendInit(e.bid),h.setupViewableWrapper(e.bid,r)},i.auctionByAdUnitID=function(n){if(n.fixedtimeout&&(g=n.fixedtimeout),g<=0){h.logEvent(h.events.preAucTimeout,g);try{n.onEnd&&n.onEnd(null,{err:"PREauction Timeout",message:"HBTIMEOUT:"+g})}catch(e){u.log("error executing callback",e.message)}}else try{const r=n.sizes,o=e.unit;u.log("start auction",o);const d=n.run||0,s={id:o.id,code:n.code,sizes:r,mediaTypes:{banner:{sizes:r}},bids:function(e,t){return e.isRefresh?u.filter(t,function(e){return e.mkp}):t}(n,o.bids)};if(!s.bids.length)return;h.logEvent(h.events.start,s,s.bids,null,d),C.requestBids({adUnits:[s],adjust(n){const r=C.findOriginalBid(n.requestId);return n.grossBid=n.cpm,n.netBid=n.grossBid*(r.adj&&r.adj?r.adj:1),n.clientBid=n.netBid*(r.rs&&r.rs?r.rs:1),n.pubBid=n.clientBid*e.pubRev,n.cpm=n.pubBid,i.isEZCtx||t||!n.ad||void 0===r.geoEdgeIndex||i.wrapGeoEdge(n,r),o.floor&&n.cpm<o.floor&&(n.floored=!0,n.cpm=0),e.isMg&&(n.pubBid=0),n},onEnd(e){let t=null;const a=C.getWinningBid();a&&(u.log("winner",a),h.logEvent(h.events.end,s,e.bidResponses,a.requestId,d),t={width:a.width,height:a.height,adId:a.requestId,adUnitId:o.id,ad:a.ad,adUrl:a.adUrl,bid:O(a.cpm),requestSizes:r,run:d}),a&&!n.render&&(a.status="targetingSet");try{n.onEnd&&n.onEnd(t,t?null:{err:"NoBids"})}catch(e){u.log("error executing callback",e.message)}if(e.timeoutBidsIds.length&&h.logEvent(h.events.timeout,s,e.timeoutBidsIds,null,d),!f){if(l&&(u.log("resolves waiting MGBid"),l(t),l=null),p[n.code])return u.log("resolves waiting render"),void(a?_(t,n.code):(p[n.code].noBidCallback(),delete p[n.code]));n.render&&(a?_(t,n.code):i.getConfig("refreshInterval")&&A(n.code,r))}}})}catch(e){u.log("auc err",e);try{n.onEnd&&n.onEnd(null)}catch(e){u.log("error executing callback",e.message)}}},i.stop=function(){u.log("stopping"),f=!0,clearInterval(T)},i.renderAd=function(e,t){try{if(u.log("render ",e,t),(e=u.copy(e)).refBid=C.findBidResponse(e.adId),!e)throw new Error("noWinner");if(!e.refBid)throw new Error("noRefBid");return e.refBid.pubBid=O(e.refBid.cpm),_(e,t),!0}catch(e){return!1}},i.cmd=i.cmd||[],i.cmd.push=U,i.cmd.length)for(let e=0;e<i.cmd.length;e++)U(i.cmd[e])}();